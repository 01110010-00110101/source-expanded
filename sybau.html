<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WannaSmile | remote</title>
</head>
<body>
    <button id="loadSite">Load Site</button>

    <script>
        const BASE = "https://cdn.jsdelivr.net/gh/wanna5mile/wanna5mile.github.io@main/";

        function fixRelativePaths(html) {
            // Fix <link href="">
            html = html.replace(/href="(?!https?:\/\/)([^"]+)"/g, (m, path) => {
                return `href="${BASE}${path}"`;
            });

            // Fix <script src="">
            html = html.replace(/src="(?!https?:\/\/)([^"]+)"/g, (m, path) => {
                return `src="${BASE}${path}"`;
            });

            // Fix <img src="">
            html = html.replace(/src="(?!https?:\/\/)([^"]+)"/g, (m, path) => {
                return `src="${BASE}${path}"`;
            });

            // Fix <a href="*.html">
            html = html.replace(/href="(?!https?:\/\/)([^"]+\.html)"/g, (m, path) => {
                return `href="${BASE}${path}"`;
            });

            return html;
        }

        document.getElementById("loadSite").addEventListener("click", () => {
            fetch(BASE + "index.html")
                .then(r => r.text())
                .then(html => {
                    html = fixRelativePaths(html);

                    const win = window.open("about:blank");
                    win.document.open();
                    win.document.write(html);
                    win.document.close();
                })
                .catch(err => console.error("Error loading:", err));
        });
    </script>
</body>
</html>
